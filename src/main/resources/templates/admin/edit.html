<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Редактировать пользователя</title>
</head>
<body>
<form th:action="@{/logout}" method="post" style="margin-bottom:12px; display:inline;">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
    <button type="submit">Выйти</button>
</form>

<h1>Редактировать пользователя</h1>

<form th:action="@{/admin/users/{id}(id=${user.id})}" method="post">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

    <div class="field">
        <label>First name:</label>
        <input name="firstName" th:value="${user.firstName}" required maxlength="64"
               pattern="[A-Za-zА-Яа-яЁё]{1,64}" title="Только буквы"/>
    </div>

    <div class="field">
        <label>Last name:</label>
        <input name="lastName" th:value="${user.lastName}" required maxlength="64"
               pattern="[A-Za-zА-Яа-яЁё]{1,64}" title="Только буквы"/>
    </div>

    <div class="field">
        <label>Email:</label>
        <input type="email" name="email" th:value="${user.email}" required maxlength="255"/>
    </div>

    <div class="field">
        <label>New password (optional):</label>
        <input type="password" name="password" placeholder="оставь пустым, если не меняешь" minlength="4" maxlength="255"/>
    </div>

    <fieldset style="margin:12px 0">
        <legend>Роли</legend>
        <div th:each="r : ${roles}">
            <label>
                <input type="checkbox" name="roleIds" th:value="${r.id}"
                       th:checked="${#lists.contains(user.roles, r)}"/>
                <span th:text="${r.name}">ROLE_USER</span>
            </label>
        </div>
    </fieldset>

    <div class="actions" style="margin-top:12px">
        <button type="submit">Сохранить</button>
        <a th:href="@{/admin/users}">Отмена</a>
    </div>
</form>
</body>
</html>
